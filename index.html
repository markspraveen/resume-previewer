<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Preview</title>

    <style>
        .resume-splitted {
            display: grid;
            grid-template-columns: 1fr 4fr;
            gap: 20px;

        }
    </style>
</head>

<body>
    <div class="resume" id="resume">
        <div class="section" id="personal_information"></div>
        <div class="section" id="summary"></div>
        <div class="section" id="publications"></div>
        <div class="section" id="volunteering"></div>
        <div class="section" id="certifications"></div>
        <div class="section" id="skills"></div>

        <div class="section" id="experience"></div>
        <div class="section" id="education"></div>
        <div class="section" id="awards"></div>
        <div class="section" id="references"></div>
        <div class="section" id="achievements"></div>
    </div>

    <script>
        const resumeData = [
            {
                order: 2,
                isHidden: false,
                sectionType: 'personal_information',
                title: 'Personal Information',
                data: {
                    firstName: 'John',
                    lastName: 'Doe',
                    email: 'john.doe@example.com',
                    phone: '(123) 456-7890',
                }
            },
            {
                order: 3,
                isHidden: false,
                sectionType: 'skills',
                title: 'Skills',
                data: [
                    'Proficient in HTML, CSS, JavaScript, and Python',
                    'Strong communication and team collaboration skills',
                    'Excellent problem-solving abilities'
                ]
            },
            {
                order: 4,
                isHidden: false,
                sectionType: 'experience',
                title: 'Experience',
                data: [
                    {
                        title: 'Frontend Developer at Tech Solutions',
                        date: 'Jan 2020 - Present',
                        points: [
                            'Developed and maintained code for in-house and client websites primarily using HTML, CSS, Sass, and JavaScript.',
                            'Optimized websites for maximum speed and scalability.',
                            'Implemented new features and optimized existing ones from controller-level to UI.'
                        ]
                    },
                    {
                        title: 'Web Developer Intern at Start-Up',
                        date: 'May 2018 - Dec 2019',
                        points: [
                            'Assisted in the development of user interface elements using JavaScript, HTML, and CSS based on the requirements gathered from clients.',
                            'Participated in project meetings, with technical staff and business stakeholders, to analyze business requirements and outline proposed IT solutions.'
                        ]
                    }
                ]
            },
            {
                order: 5,
                isHidden: false,
                sectionType: 'education',
                title: 'Education',
                data: [
                    {
                        title: 'Bachelor of Science in Computer Science',
                        date: 'University of Technology - Graduated May 2018'
                    }
                ]
            },
            {
                order: 6,
                isHidden: false,
                sectionType: 'references',
                title: 'References',
                data: 'Available upon request.'
            }
        ];

        function sortDOMElementsByOrder() {
            const container = document.getElementById('resume');
            const sections = container.getElementsByClassName('section');
            const sortedSections = Array.from(sections)
                .filter(el => el.id && resumeData.some(section => section.sectionType === el.id))
                .sort((a, b) => {
                    const orderA = resumeData.find(section => section.sectionType === a.id).order;
                    const orderB = resumeData.find(section => section.sectionType === b.id).order;
                    return orderA - orderB;
                });

            sortedSections.forEach(el => container.appendChild(el)); // Re-append elements in sorted order
        }


        function insertResumeData() {

            resumeData.forEach(section => {
                const sectionElement = document.getElementById(section.sectionType);
                if (!sectionElement || section.isHidden) return;
                sectionElement.innerHTML = `<h2>${section.title}</h2>`;

                if (typeof section.data === 'string') {
                    sectionElement.innerHTML += `<p>${section.data}</p>`;
                } else if (Array.isArray(section.data)) {
                    const list = document.createElement('ul');
                    section.data.forEach(item => {
                        const listItem = document.createElement('li');
                        listItem.textContent = item;
                        list.appendChild(listItem);
                    });
                    sectionElement.appendChild(list);
                } else if (typeof section.data === 'object' && !Array.isArray(section.data)) {
                    const info = document.createElement('p');
                    info.innerHTML = `Name: ${section.data.firstName} ${section.data.lastName} | Email: ${section.data.email} | Phone: ${section.data.phone}`;
                    sectionElement.appendChild(info);
                }

                if (section.sectionType === 'experience' || section.sectionType === 'education') {
                    section.data.forEach(subSection => {
                        const subSectionElement = document.createElement('div');
                        subSectionElement.innerHTML = `<h3>${subSection.title}</h3><p>${subSection.date}</p>`;
                        const pointsList = document.createElement('ul');
                        if (subSection && subSection.points) {
                            subSection.points.forEach(point => {
                                const pointItem = document.createElement('li');
                                pointItem.textContent = point;
                                pointsList.appendChild(pointItem);
                            });
                        }
                        subSectionElement.appendChild(pointsList);
                        sectionElement.appendChild(subSectionElement);
                    });
                }
            });
            sortDOMElementsByOrder();
        }

        window.onload = insertResumeData;
    </script>
</body>

</html>